MAT EQU 20h
ADJCOUNT1 EQU 38h
ADJCOUNT EQU 80h

INIT:
    MOV R0, #MAT
	MOV	@R0, #01000100b
	INC R0
	MOV	@R0, #00000010b
	INC R0
	MOV	@R0, #00110010b
	INC R0
	MOV	@R0, #10000000b
	INC R0
	MOV	@R0, #01101010b
	INC R0
	MOV	@R0, #00000010b
	INC R0
	MOV	@R0, #00000000b
	INC R0
	MOV	@R0, #01100010b

    MOV A, #64
    MOV R0, #ADJCOUNT
CLEARADJ:
    MOV @R0, #00h
    DEC A
    INC R0
    JNZ CLEARADJ
INITADJ:
    MOV R0, #ADJCOUNT
    JB 0, INITADJ01
    ACALL INCADJ
INITADJ01:
    INC R0
    JB 01, INITADJ02
    ACALL INCADJ
INITADJ02:
    INC R0
    JB 02, INITADJ03
    ACALL INCADJ
INITADJ03:
    INC R0
    JB 03, INITADJ04
    ACALL INCADJ
INITADJ04:
    INC R0
    JB 04, INITADJ05
    ACALL INCADJ
INITADJ05:
    INC R0
    JB 05, INITADJ06
    ACALL INCADJ
INITADJ06:
    INC R0
    JB 06, INITADJ07
    ACALL INCADJ
INITADJ07:
    INC R0
    JB 07, INITADJ08
    ACALL INCADJ
INITADJ08:
    INC R0
    JB 08, INITADJ09
    ACALL INCADJ
INITADJ09:
    INC R0
    JB 09, INITADJ10
    ACALL INCADJ
INITADJ10:
    INC R0
    JB 10, INITADJ11
    ACALL INCADJ
INITADJ11:
    INC R0
    JB 11, INITADJ12
    ACALL INCADJ
INITADJ12:
    INC R0
    JB 12, INITADJ13
    ACALL INCADJ
INITADJ13:
    INC R0
    JB 13, INITADJ14
    ACALL INCADJ
INITADJ14:
    INC R0
    JB 14, INITADJ15
    ACALL INCADJ
INITADJ15:
    INC R0
    JB 15, INITADJ16
    ACALL INCADJ
INITADJ16:
    INC R0
    JB 16, INITADJ17
    ACALL INCADJ
INITADJ17:
    INC R0
    JB 17, INITADJ18
    ACALL INCADJ
INITADJ18:
    INC R0
    JB 18, INITADJ19
    ACALL INCADJ
INITADJ19:
    INC R0
    JB 19, INITADJ20
    ACALL INCADJ
INITADJ20:
    INC R0
    JB 20, INITADJ21
    ACALL INCADJ
INITADJ21:
    INC R0
    JB 21, INITADJ22
    ACALL INCADJ
INITADJ22:
    INC R0
    JB 22, INITADJ23
    ACALL INCADJ
INITADJ23:
    INC R0
    JB 23, INITADJ24
    ACALL INCADJ
INITADJ24:
    INC R0
    JB 24, INITADJ25
    ACALL INCADJ
INITADJ25:
    INC R0
    JB 25, INITADJ26
    ACALL INCADJ
INITADJ26:
    INC R0
    JB 26, INITADJ27
    ACALL INCADJ
INITADJ27:
    INC R0
    JB 27, INITADJ28
    ACALL INCADJ
INITADJ28:
    INC R0
    JB 28, INITADJ29
    ACALL INCADJ
INITADJ29:
    INC R0
    JB 29, INITADJ30
    ACALL INCADJ
INITADJ30:
    INC R0
    JB 30, INITADJ31
    ACALL INCADJ
INITADJ31:
    INC R0
    JB 31, INITADJ32
    ACALL INCADJ
INITADJ32:
    INC R0
    JB 32, INITADJ33
    ACALL INCADJ
INITADJ33:
    INC R0
    JB 33, INITADJ34
    ACALL INCADJ
INITADJ34:
    INC R0
    JB 34, INITADJ35
    ACALL INCADJ
INITADJ35:
    INC R0
    JB 35, INITADJ36
    ACALL INCADJ
INITADJ36:
    INC R0
    JB 36, INITADJ37
    ACALL INCADJ
INITADJ37:
    INC R0
    JB 37, INITADJ38
    ACALL INCADJ
INITADJ38:
    INC R0
    JB 38, INITADJ39
    ACALL INCADJ
INITADJ39:
    INC R0
    JB 39, INITADJ40
    ACALL INCADJ
INITADJ40:
    INC R0
    JB 40, INITADJ41
    ACALL INCADJ
INITADJ41:
    INC R0
    JB 41, INITADJ42
    ACALL INCADJ
INITADJ42:
    INC R0
    JB 42, INITADJ43
    ACALL INCADJ
INITADJ43:
    INC R0
    JB 43, INITADJ44
    ACALL INCADJ
INITADJ44:
    INC R0
    JB 44, INITADJ45
    ACALL INCADJ
INITADJ45:
    INC R0
    JB 45, INITADJ46
    ACALL INCADJ
INITADJ46:
    INC R0
    JB 46, INITADJ47
    ACALL INCADJ
INITADJ47:
    INC R0
    JB 47, INITADJ48
    ACALL INCADJ
INITADJ48:
    INC R0
    JB 48, INITADJ49
    ACALL INCADJ
INITADJ49:
    INC R0
    JB 49, INITADJ50
    ACALL INCADJ
INITADJ50:
    INC R0
    JB 50, INITADJ51
    ACALL INCADJ
INITADJ51:
    INC R0
    JB 51, INITADJ52
    ACALL INCADJ
INITADJ52:
    INC R0
    JB 52, INITADJ53
    ACALL INCADJ
INITADJ53:
    INC R0
    JB 53, INITADJ54
    ACALL INCADJ
INITADJ54:
    INC R0
    JB 54, INITADJ55
    ACALL INCADJ
INITADJ55:
    INC R0
    JB 55, INITADJ56
    ACALL INCADJ
INITADJ56:
    INC R0
    JB 56, INITADJ57
    ACALL INCADJ
INITADJ57:
    INC R0
    JB 57, INITADJ58
    ACALL INCADJ
INITADJ58:
    INC R0
    JB 58, INITADJ59
    ACALL INCADJ
INITADJ59:
    INC R0
    JB 59, INITADJ60
    ACALL INCADJ
INITADJ60:
    INC R0
    JB 60, INITADJ61
    ACALL INCADJ
INITADJ61:
    INC R0
    JB 61, INITADJ62
    ACALL INCADJ
INITADJ62:
    INC R0
    JB 62, INITADJ63
    ACALL INCADJ
INITADJ63:
    INC R0
    JB 63, INITADJ64
    ACALL INCADJ
INITADJ64:

START:
    MOV R0, #ADJCOUNT
STEP00:
    MOV A, @R0
    JB 00, DEADSTEP00
ALIFESTEP00:
    AJMP STEPEND00
DEADSTEP00:
    SUBB A, #03h
    JNZ STEPEND00
    CPL 00
    ACALL INCADJ
STEPEND00:
    INC R0

STOP:
    AJMP STOP

ADJJMP:
    JB C, ADJJMP01
    INC @R0
    AJMP ADJJMPRET
ADJJMP01:
    DEC @R0
ADJJMPRET:
    RET

DECADJ:
    SETB C
    AJMP INCADJ00
INCADJ:
    CLR C
INCADJ00:
    MOV A, R0
    SUBB A, #ADJCOUNT
    ANL A, #00000111b
    JZ INCADJ01
    DEC R0
    ACALL ADJJMP
    MOV A, R0
    SUBB A, #08h
    MOV R0, A
    ACALL ADJJMP
    ADD A, #10h
    MOV R0, A
    ACALL ADJJMP
    SUBB A, #07h
    MOV R0, A
INCADJ01:
    MOV A, R0
    SUBB A, #08h
    MOV B, R0
    MOV R0, A
    ACALL ADJJMP
    MOV R0, B
INCADJ02:
    MOV A, R0
    SUBB A, #ADJCOUNT
    ANL A, #00000111b
    INC A
    ANL A, #00000111b
    JZ INCADJ03
    INC R0
    ACALL ADJJMP
    MOV A, R0
    SUBB A, #08h
    MOV R0, A
    ACALL ADJJMP
    ADD A, #10h
    MOV R0, A
    ACALL ADJJMP
    SUBB A, #09h
    MOV R0, A
INCADJ03:
    MOV A, R0
    ADD A, #08h
    MOV B, R0
    MOV R0, A
    ACALL ADJJMP
    MOV R0, B
    CLR C
    RET

END